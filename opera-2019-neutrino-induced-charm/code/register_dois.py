"""A quick script to register OPERA DOIs."""

import click
import json

dois = [
    "10.7483/OPENDATA.OPERA.GWO1.DHC6",
    "10.7483/OPENDATA.OPERA.YYGU.EQ6C",
    "10.7483/OPENDATA.OPERA.W70L.YN4A",
    "10.7483/OPENDATA.OPERA.P19D.1VR1",
    "10.7483/OPENDATA.OPERA.SV4Z.LOIA",
    "10.7483/OPENDATA.OPERA.DAZB.98ON",
    "10.7483/OPENDATA.OPERA.C4P4.4HPB",
    "10.7483/OPENDATA.OPERA.Z6WS.HQOF",
    "10.7483/OPENDATA.OPERA.Y977.S5T4",
    "10.7483/OPENDATA.OPERA.W2MQ.KKS4",
    "10.7483/OPENDATA.OPERA.D0PG.6TTZ",
    "10.7483/OPENDATA.OPERA.950S.773Y",
    "10.7483/OPENDATA.OPERA.IAUX.7I1P",
    "10.7483/OPENDATA.OPERA.KYXN.6E1Y",
    "10.7483/OPENDATA.OPERA.PINU.KUAO",
    "10.7483/OPENDATA.OPERA.WJ7F.8YNS",
    "10.7483/OPENDATA.OPERA.E7K1.ATHG",
    "10.7483/OPENDATA.OPERA.OEDY.YL0T",
    "10.7483/OPENDATA.OPERA.MEL8.LB0S",
    "10.7483/OPENDATA.OPERA.I72E.8MZN",
    "10.7483/OPENDATA.OPERA.XXJX.V079",
    "10.7483/OPENDATA.OPERA.MJ4A.WOXR",
    "10.7483/OPENDATA.OPERA.UVU1.CN3Y",
    "10.7483/OPENDATA.OPERA.VHBA.3GHU",
    "10.7483/OPENDATA.OPERA.QJDW.1U8C",
    "10.7483/OPENDATA.OPERA.G3LT.D11D",
    "10.7483/OPENDATA.OPERA.Q74R.SYBQ",
    "10.7483/OPENDATA.OPERA.3QWU.0XP5",
    "10.7483/OPENDATA.OPERA.KOV2.2JPO",
    "10.7483/OPENDATA.OPERA.AFXH.0F70",
    "10.7483/OPENDATA.OPERA.GGUN.OI8E",
    "10.7483/OPENDATA.OPERA.X99O.NEX3",
    "10.7483/OPENDATA.OPERA.KCNY.95NO",
    "10.7483/OPENDATA.OPERA.93HC.PHOQ",
    "10.7483/OPENDATA.OPERA.LU2M.T647",
    "10.7483/OPENDATA.OPERA.XP6B.B3FV",
    "10.7483/OPENDATA.OPERA.TUSG.5420",
    "10.7483/OPENDATA.OPERA.PX6N.B3I0",
    "10.7483/OPENDATA.OPERA.3KJ9.3UHQ",
    "10.7483/OPENDATA.OPERA.ZUZC.T7FY",
    "10.7483/OPENDATA.OPERA.HV5K.Q65F",
    "10.7483/OPENDATA.OPERA.5ESV.4FBB",
    "10.7483/OPENDATA.OPERA.AYAG.OZ5Q",
    "10.7483/OPENDATA.OPERA.E23M.Z488",
    "10.7483/OPENDATA.OPERA.EAZU.GC9E",
    "10.7483/OPENDATA.OPERA.7DK1.B2E4",
    "10.7483/OPENDATA.OPERA.6OC6.40JD",
    "10.7483/OPENDATA.OPERA.KB3R.5ZM4",
    "10.7483/OPENDATA.OPERA.OGV5.JP9F",
    "10.7483/OPENDATA.OPERA.DCMT.0R6D",
    "10.7483/OPENDATA.OPERA.HM8I.NWIL",
    "10.7483/OPENDATA.OPERA.FN68.4JQP",
    "10.7483/OPENDATA.OPERA.FFOA.C60K",
    "10.7483/OPENDATA.OPERA.41W8.QEG8",
    "10.7483/OPENDATA.OPERA.DCST.QR93",
    "10.7483/OPENDATA.OPERA.1BSO.PFTN",
    "10.7483/OPENDATA.OPERA.DM7L.NWSN",
    "10.7483/OPENDATA.OPERA.1VB0.BX4O",
    "10.7483/OPENDATA.OPERA.S6PJ.1X1W",
    "10.7483/OPENDATA.OPERA.XZ7O.1VEA",
    "10.7483/OPENDATA.OPERA.N3VW.5R3Z",
    "10.7483/OPENDATA.OPERA.NU26.2NWP",
    "10.7483/OPENDATA.OPERA.EXW6.C9CY",
    "10.7483/OPENDATA.OPERA.VQC2.2L5H",
    "10.7483/OPENDATA.OPERA.W3IH.TQ04",
    "10.7483/OPENDATA.OPERA.2Z2J.SG98",
    "10.7483/OPENDATA.OPERA.838A.PHUP",
    "10.7483/OPENDATA.OPERA.6XII.AB48",
    "10.7483/OPENDATA.OPERA.W298.EOFI",
    "10.7483/OPENDATA.OPERA.R5MW.SEFX",
    "10.7483/OPENDATA.OPERA.6DHZ.02AI",
    "10.7483/OPENDATA.OPERA.6YX1.BRUK",
    "10.7483/OPENDATA.OPERA.ELJ3.0GOU",
]


@click.command()
@click.argument('filenames', nargs=-1, type=click.Path(exists=True))
def process_json_file(filenames):
    """Find records matching some of wanted DOIs and print register command for them.
    """
    for filename in filenames:
        with open(filename, 'r') as fdesc:
            records = json.loads(fdesc.read())
        for record in records:
            if 'doi' in record and record['doi'] in dois:
                print('docker exec -i -t opendatacernch_web_1 cernopendata datacite register --recid {}'.format(record['recid']))


if __name__ == '__main__':
    process_json_file()
